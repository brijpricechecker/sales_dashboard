<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8" />
<title>Inventory Dashboard</title>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<style>
body { font-family: Arial; margin: 20px; background: #f7f7f7; }
.summary { display: flex; gap: 20px; margin-top: 20px; flex-wrap: wrap; }
.box {
  background: #fff; padding: 15px; border-radius: 5px;
  box-shadow: 0 2px 4px rgba(0,0,0,0.1); flex: 1; min-width: 200px;
  text-align: center; font-size: 18px; font-weight: bold;
}
#totalSalesBox { background-color: #d1ecf1; }
#totalPurchasesBox { background-color: #d4edda; }
#totalRevenueBox { background-color: #f8d7da; }

canvas { background: white; border: 1px solid #ccc; margin-top: 20px; }
label, select, input { margin: 10px; }
table { width: 100%; border-collapse: collapse; background: white; margin-top: 20px; }
th, td { border: 1px solid #ccc; padding: 8px; text-align: center; }
th { background: #eee; }
.charts { display: flex; flex-direction: column; gap: 20px; margin-top: 20px; }
@media(min-width: 768px) {
  .charts { flex-direction: row; }
  canvas { flex: 1; min-width: 300px; max-width: 100%; }
}
</style>
</head>
<body>
<h2>Inventory Dashboard</h2>

<label>Start Date: <input type="date" id="startDate" /></label>
<label>End Date: <input type="date" id="endDate" /></label>
<label>Supplier:
<select id="supplierFilter">
<option value="">All Suppliers</option>
</select>
</label>
<button onclick="loadDashboard()">Load Dashboard</button>

<div class="summary">
<div class="box" id="totalSalesBox">Total Sales: 0.00</div>
<div class="box" id="totalPurchasesBox">Total Purchases: 0.00</div>
<div class="box" id="totalRevenueBox">Total Revenue: 0.00</div>
</div>

<div class="charts">
<canvas id="salesChart" height="200"></canvas>
<canvas id="purchasesChart" height="200"></canvas>
<canvas id="revenueChart" height="200"></canvas>
<canvas id="revenuePieChart" height="200"></canvas>
</div>

<h3>Top 10 Items by Quantity Sold</h3>
<table id="topSalesTable">
<thead><tr><th>Item</th><th>Quantity</th></tr></thead>
<tbody></tbody>
</table>

<h3>Top 10 Items by Revenue</h3>
<table id="topRevenueTable">
<thead><tr><th>Item</th><th>Quantity</th><th>Revenue</th></tr></thead>
<tbody></tbody>
</table>

<script>
const dataUrl = "https://script.google.com/macros/s/AKfycbyNhFl8nWDfs7LQLWhhbV9-KUdENX-9aqT8W_jr4-zNEjBqeIKXwU9hWRuoTXaiHmJ8/exec"; // Replace with your actual URL

function loadDashboard() {
  const startDate = document.getElementById("startDate").value;
  const endDate = document.getElementById("endDate").value;
  const supplier = document.getElementById("supplierFilter").value;

  const url = `${dataUrl}?startDate=${startDate}&endDate=${endDate}&supplier=${supplier}`;
  fetch(url)
    .then(response => response.json())
    .then(data => {
      document.getElementById("totalSalesBox").textContent = "Total Sales: " + data.totals.sales.toFixed(2);
      document.getElementById("totalPurchasesBox").textContent = "Total Purchases: " + data.totals.purchases.toFixed(2);
      document.getElementById("totalRevenueBox").textContent = "Total Revenue: " + data.totals.revenue.toFixed(2);

      const supplierDropdown = document.getElementById("supplierFilter");
      supplierDropdown.innerHTML = `<option value="">All Suppliers</option>`;
      data.allSuppliers.forEach(s => {
        const opt = document.createElement("option");
        opt.value = s;
        opt.textContent = s;
        supplierDropdown.appendChild(opt);
      });

      const salesTable = document.querySelector("#topSalesTable tbody");
      salesTable.innerHTML = "";
      data.topSales.forEach(item => {
        const row = `<tr><td>${item.name}</td><td>${item.quantity}</td></tr>`;
        salesTable.innerHTML += row;
      });

      const revenueTable = document.querySelector("#topRevenueTable tbody");
      revenueTable.innerHTML = "";
      data.topRevenue.forEach(item => {
        const row = `<tr><td>${item.name}</td><td>${item.quantity}</td><td>${item.revenue.toFixed(2)}</td></tr>`;
        revenueTable.innerHTML += row;
      });

      // Optionally add chart rendering here
    });
}
</script>
</body>
</html>


